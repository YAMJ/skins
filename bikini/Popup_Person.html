<html>
    <head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>YAMJ v3 Person popup</title>
        <script src="js/jQuery.js"></script>
        <script src="js/pure.js"></script>
		<!-- Used for skin language setting -->
		<script src="js/lang.js"></script>
		<!-- Used for template -->
		<script src="js/template.js"></script>	
        <link rel="stylesheet" type="text/css" href="css/Popup_Person-style.css">
    </head>
    <body onload="PersonData();" >
        <script type="text/javascript">
            function PersonData()
            {
				var	id = localStorage.getItem ("Person_id");
			// fill all value according to language setting - from yamjv3_lang_{lang}.xml
				get_lang();	
				
               jsonUrl = "/yamj3/api/person/" + id + ".json?dataitems=artwork,biography,filmography_scanned&sortby=year&sortdir=desc";
		//		jsonUrl = "/yamj3/api/person/" + id + ".json?dataitems=artwork,biography,filmography";
				if (window.localStorage.getItem('Style') == "frame") {init_person_popup(id);}
                var jsondata = null;
				switch (window.localStorage.getItem('back_close'))
				{
					case 'close':
						document.getElementById('back_icon').style.visibility="hidden";
						document.getElementById('close_icon').style.visibility="visible";
					break;	
					case 'back':
						document.getElementById('close_icon').style.visibility="hidden";
						document.getElementById('back_icon').style.visibility="visible";
					break;
					
				}
                console.log("Popup_Person Call for URL with person ID:" + id);
				console.log("Popup_Person jsonUrl: " + jsonUrl);

                $.ajax({
                    url: jsonUrl,
                    async: false,
                    dataType: 'jsonp',
                    'success': function(data)
                    {
                        jsondata = data;
					//	outputJson(data); 	
                        updateHtml(data);
						update_inside(id);
                    }
                });
				
                return jsondata;
            }

        function updateHtml(yamjdata)
            {
            //    console.log(yamjdata);
                YAMJ_DIR = {
              //      'span.id': 'result.id',
                    'span.name': 'result.name',
                    'span.birthPlace': 'result.birthPlace',
					'span.birthDay': function(arg) {
								if (arg.context.result.birthDay) 
								{
									return arg.context.result.birthDay;
								} else {
								return nobirthday_text;
								}
							},
                    'span.biography': function(arg) {
								if (arg.context.result.biography) 
								{
									return arg.context.result.biography;
								} else {
								return nobiography_text;
								}
							},
                    'span.image': function(arg) {
                        // Check to see if there is artwork
                        if (arg.context.result.artwork) {
                            // Get the first photo from the list
                            var photo = arg.context.result.artwork[0];
                            if (photo.generatedId === 0) {
                                return "<img src=\"pictures/dummy_photo.jpg\">";
                            }
                            return "<img src=\"" + arg.context.basePhotoUrl + photo.filename + "\">";
                        } else {
                            return "<img src=\"pictures/dummy_photo.jpg\">";
                        }
                    }
                };
			  var LIST_FILMOGRAPHY = {
						'span.filmography': function(arg)
						{
							var filmography_list = arg.context.result.filmography;
							var output = filmography_label +":<br>";
							if (arg.context.result.filmography) {
							// loop thru the list of filmography
							for (i = 0; i < filmography_list.length; i++)
							{
								if (filmography_list[i].role)
									{
										temp_output = filmography_list[i].year + " - " + filmography_list[i].title + " - " + filmography_list[i].job.substring(0,1).toUpperCase() + filmography_list[i].job.substring(1).toLowerCase() + " (" + filmography_list[i].role.italics() +")<br>";
									} else {
										temp_output = filmography_list[i].year + " - " + filmography_list[i].title + " - " + filmography_list[i].job.substring(0,1).toUpperCase() + filmography_list[i].job.substring(1).toLowerCase() + "<br>";
										}
								output = output +  temp_output;
							}
							}
							return output;
							
						}
				};

				$p('.template').render(yamjdata, YAMJ_DIR);		
				$p('.result_filmography').render(yamjdata, LIST_FILMOGRAPHY);	
            }
			
        function update_inside (id)
            {
			    jsonFilmography_inside = "/yamj3/api/person/" + id + ".json?dataitems=filmography_inside&sortby=year&sortdir=desc";
				console.log("Popup_Person jsonFilmography_inside: " + jsonFilmography_inside);
				  $.ajax({
						url: jsonFilmography_inside,
						async: false,
						dataType: 'jsonp',
						'success': function(Filmography_inside_data)
						{
							jsondata = Filmography_inside_data;
						//	outputJson(Filmography_inside_data); 	
							updateHtml_inside(Filmography_inside_data);
						}
					});
			}
		function updateHtml_inside (Filmography_inside_data)
			{
 				var LIST_FILMOGRAPHY_INSIDE = { 
				'span.filmography_inside': function(arg)
						{
						var filmography_inside_list = arg.context.result.filmography;
						$('.Filmography_in').css('display', 'none'); 
						$('.result_filmography_inside').empty();
						
						var init_inside = "<tr><td><span class=\"filmography_inside\"></span></td></tr>"
						$('.result_filmography_inside').append(init_inside);
						var output_inside =  "";
	
					//		var output = filmography_label +":<br>";
					//	var output_inside = "<text>Inside filmography: </text><br>";
					//	 $('.filmography_inside').append(output_inside);
							// loop thru the list of filmography
							for (i = 0; i < filmography_inside_list.length; i++) {	
								if (filmography_inside_list[i].type == "MOVIE")
									{
									$('.Filmography_in').css('display', 'block'); 
									if (filmography_inside_list[i].job != 'ACTOR')
									{
										temp_output_inside =  "<td><a href=\"javascript:setId('" + filmography_inside_list[i].type + "', '" + filmography_inside_list[i].videoDataId + "');\"><p class=\"filmography_name\">"+ filmography_inside_list[i].title +"</p><img class=\"poster"+i+"\" src=\"\" height=\"120px\" width=\"80px\" ></img><p class=\"filmography_name\">"+ filmography_inside_list[i].job.italics() +"</p></a></td>" ;
									} else {
											if (filmography_inside_list[i].role) {temp_output_inside =  "<td><a href=\"javascript:setId('" + filmography_inside_list[i].type + "', '" + filmography_inside_list[i].videoDataId + "');\"><p class=\"filmography_name\">"+ filmography_inside_list[i].title +"</p><img class=\"poster"+i+"\" src=\"\" height=\"120px\" width=\"80px\" ></img><p class=\"filmography_name\">"+ filmography_inside_list[i].role.italics() +"</p></a></td>" ;}
											else {temp_output_inside =  "<td><a href=\"javascript:setId('" + filmography_inside_list[i].type + "', '" + filmography_inside_list[i].videoDataId + "');\"><p class=\"filmography_name\">"+ filmography_inside_list[i].title +"</p><img class=\"poster"+i+"\" src=\"\" height=\"120px\" width=\"80px\" ></img><p class=\"filmography_name\"></p></a></td>" ;}
									} 
									$('.filmography_inside').append(temp_output_inside);
									get_poster(filmography_inside_list[i].type, filmography_inside_list[i].videoDataId, i); 
									}
								if (filmography_inside_list[i].type == "SERIES")
									{
									$('.Filmography_in').css('display', 'block'); 
									if (filmography_inside_list[i].job != 'ACTOR')
									{
										temp_output_inside =  "<td><a href=\"javascript:setId('" + filmography_inside_list[i].type + "', '" + filmography_inside_list[i].seriesId + "');\"><p class=\"filmography_name\">"+ filmography_inside_list[i].title +"</p><img class=\"poster"+i+"\" src=\"\" height=\"120px\" width=\"80px\" ></img><p class=\"filmography_name\">"+ filmography_inside_list[i].job.italics() +"</p></a></td>" ;
									} else {
											if (filmography_inside_list[i].role) {temp_output_inside =  "<td><a href=\"javascript:setId('" + filmography_inside_list[i].type + "', '" + filmography_inside_list[i].seriesId + "');\"><p class=\"filmography_name\">"+ filmography_inside_list[i].title +"</p><img class=\"poster"+i+"\" src=\"\" height=\"120px\" width=\"80px\" ></img><p class=\"filmography_name\">"+ filmography_inside_list[i].role.italics() +"</p></a></td>" ;}
											else {temp_output_inside =  "<td><a href=\"javascript:setId('" + filmography_inside_list[i].type + "', '" + filmography_inside_list[i].seriesId + "');\"><p class=\"filmography_name\">"+ filmography_inside_list[i].title +"</p><img class=\"poster"+i+"\" src=\"\" height=\"120px\" width=\"80px\" ></img><p class=\"filmography_name\"></p></a></td>" ;}
									} 
									 $('.filmography_inside').append(temp_output_inside);
									get_poster(filmography_inside_list[i].type, filmography_inside_list[i].seriesId, i); 
									}
							}
							return output_inside;
						}	
				};
				$p('.result_filmography_inside').render(Filmography_inside_data, LIST_FILMOGRAPHY_INSIDE);
            }			
	function get_poster (type, videodataId, i) 
			{
		//	var jsondata = null;
				jsonPoster = "/yamj3/api/video/" + type.toLowerCase() + "/" + videodataId + ".json?dataitems=artwork";
				console.log("Popup_Person jsonPoster: " + jsonPoster);
				$.ajax({
                    url: jsonPoster,
                    async: false,
                    dataType: 'jsonp',
                    'success': function(Poster_data)
                    {
                     jsondata = Poster_data; 
					 updatePosterHtml(Poster_data, i);
				//	outputJson(Poster_data); 	
                    }
                });
			}
			
	 function updatePosterHtml(Posterdata, i)
            {
            	var boucle = true;
				switch (i) 
					{
							case 0:
								YAMJ_DIR0 = {
							   // display poster 	
								'img.poster0@src': function(arg) {
						// Get the first poster available from the list
								for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR0); 
								break;
							case 1:
								YAMJ_DIR1 = {
							   // display poster 	
								'img.poster1@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR1); 
								break;
							case 2:
								YAMJ_DIR2 = {
							   // display poster 	
								'img.poster2@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR2); 
								break;
							case 3:
								YAMJ_DIR3 = {
							   // display poster 	
								'img.poster3@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR3); 
								break;
							case 4:
								YAMJ_DIR4 = {
							   // display poster 	
								'img.poster4@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR4); 
								break;
							case 5:
								YAMJ_DIR5 = {
							   // display poster 	
								'img.poster5@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR5); 
								break;
							case 6:
								YAMJ_DIR6 = {
							   // display poster 	
								'img.poster6@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR6); 
								break;
							case 7:
								YAMJ_DIR7 = {
							   // display poster 	
								'img.poster7@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR7); 
								break;
							case 8:
								YAMJ_DIR8 = {
							   // display poster 	
								'img.poster8@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR8); 
								break;
							case 9:
								YAMJ_DIR9 = {
							   // display poster 	
								'img.poster9@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR9); 
								break;
							case 10:
								YAMJ_DIR10 = {
							   // display poster 	
								'img.poster10@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR10); 
								break;
							case 11:
								YAMJ_DIR11 = {
							   // display poster 	
								'img.poster11@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR11); 
								break;	
							case 12:
								YAMJ_DIR12 = {
							   // display poster 	
								'img.poster12@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}	
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR12); 
								break;
							case 13:
								YAMJ_DIR13 = {
							   // display poster 	
								'img.poster13@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR13); 
								break;	
							case 14:
								YAMJ_DIR14 = {
							   // display poster 	
								'img.poster14@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR14); 
								break;
							case 15:
								YAMJ_DIR15 = {
							   // display poster 	
								'img.poster15@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR15); 
								break;
							case 16:
								YAMJ_DIR16 = {
							   // display poster 	
								'img.poster16@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR16); 
								break;
							case 17:
								YAMJ_DIR17 = {
							   // display poster 	
								'img.poster17@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR17); 
								break;
							case 18:
								YAMJ_DIR18 = {
							   // display poster 	
								'img.poster18@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR18); 
								break;
							case 19:
								YAMJ_DIR19 = {
							   // display poster 	
								'img.poster19@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR19); 
								break;
							case 20:
								YAMJ_DIR20 = {
							   // display poster 	
								'img.poster20@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR20); 
								break;
							case 21:
								YAMJ_DIR21 = {
							   // display poster 	
								'img.poster21@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR21); 
								break;
							case 22:
								YAMJ_DIR22 = {
							   // display poster 	
								'img.poster22@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}	
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR22); 
								break;
							case 23:
								YAMJ_DIR23 = {
							   // display poster 	
								'img.poster23@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR23); 
								break;	
							case 24:
								YAMJ_DIR24 = {
							   // display poster 	
								'img.poster24@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR24); 
								break;
							case 25:
								YAMJ_DIR25 = {
							   // display poster 	
								'img.poster25@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR25); 
								break;
							case 26:
								YAMJ_DIR26 = {
							   // display poster 	
								'img.poster26@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR26); 
								break;
							case 27:
								YAMJ_DIR27 = {
							   // display poster 	
								'img.poster27@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR27); 
								break;
							case 28:
								YAMJ_DIR28 = {
							   // display poster 	
								'img.poster28@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR28); 
								break;
							case 29:
								YAMJ_DIR29 = {
							   // display poster 	
								'img.poster29@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR29); 
								break;
							case 30:
								YAMJ_DIR30 = {
							   // display poster 	
								'img.poster30@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR30); 
								break;
							case 31:
								YAMJ_DIR31 = {
							   // display poster 	
								'img.poster31@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR31); 
								break;
							case 32:
								YAMJ_DIR32 = {
							   // display poster 	
								'img.poster32@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}	
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR32); 
								break;
							case 33:
								YAMJ_DIR33 = {
							   // display poster 	
								'img.poster33@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR33); 
								break;	
							case 34:
								YAMJ_DIR34 = {
							   // display poster 	
								'img.poster34@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR34); 
								break;
							case 35:
								YAMJ_DIR35 = {
							   // display poster 	
								'img.poster35@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR35); 
								break;
							case 36:
								YAMJ_DIR36 = {
							   // display poster 	
								'img.poster36@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR36); 
								break;
							case 37:
								YAMJ_DIR37 = {
							   // display poster 	
								'img.poster37@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR37); 
								break;
							case 38:
								YAMJ_DIR38 = {
							   // display poster 	
								'img.poster38@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR38); 
								break;
							case 39:
								YAMJ_DIR39 = {
							   // display poster 	
								'img.poster39@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR39); 
								break;
							case 40:
								YAMJ_DIR40 = {
							   // display poster 	
								'img.poster40@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR40); 
								break;
							case 41:
								YAMJ_DIR41 = {
							   // display poster 	
								'img.poster41@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR41); 
								break;
							case 42:
								YAMJ_DIR42 = {
							   // display poster 	
								'img.poster42@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}	
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR42); 
								break;
							case 43:
								YAMJ_DIR43 = {
							   // display poster 	
								'img.poster43@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR43); 
								break;	
							case 44:
								YAMJ_DIR44 = {
							   // display poster 	
								'img.poster44@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR44); 
								break;
							case 45:
								YAMJ_DIR45 = {
							   // display poster 	
								'img.poster45@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR45); 
								break;
							case 46:
								YAMJ_DIR46 = {
							   // display poster 	
								'img.poster46@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR46); 
								break;
							case 47:
								YAMJ_DIR47 = {
							   // display poster 	
								'img.poster47@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR47); 
								break;
							case 48:
								YAMJ_DIR48 = {
							   // display poster 	
								'img.poster48@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR48); 
								break;
							case 49:
								YAMJ_DIR49 = {
							   // display poster 	
								'img.poster49@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR49); 
								break;
							case 50:
								YAMJ_DIR50 = {
							   // display poster 	
								'img.poster50@src': function(arg) {
									for (j = 0; boucle && j < arg.context.result.artwork.POSTER.length; j++) 
										{
											if (arg.context.result.artwork.POSTER[j].generatedId != 0)
											{
												boucle = false;
											// Check to see if there are posters
												return arg.context.baseArtworkUrl + arg.context.result.artwork.POSTER[j].filename; 
											}
										}
									}
								}
								$p('.result_filmography_inside').render(Posterdata, YAMJ_DIR50); 
								break;
					}		
            }
			
			 function setId(type, id)
        {
            window.localStorage.setItem("indextype", type);
            window.localStorage.setItem("id", id);
            console.log("setId Storing value: " + type + "-" + id);
          	window.open("detail.html", "YAMJ v3 detail page", "");
        }
			function close_person ()
			{
				console.log("close_person:  style:"+window.localStorage.getItem('Style'));
				switch (window.localStorage.getItem('Style'))
				{
					case 'frame':
						parent.document.getElementById('person_display').style.visibility="hidden";
						parent.document.getElementById('target_display').style.visibility="hidden";
						parent.document.getElementById('target_display').style.zIndex="6";
					break;	
					case 'page':
						this.window.close();
					break;
					case 'ribbon':
						this.window.close();
					break;	
					case 'popup':
						this.window.close();
					break;
					
				}
				parent.document.getElementById('person_display').style.visibility="hidden";
			} 
			function back ()
			{
				console.log ("Popup_Person: back : style: "+window.localStorage.getItem('Style'));
				switch (window.localStorage.getItem('Style'))
				{
					case 'frame':
				
					//	parent.document.getElementById('target_frame').style.display="none";
						parent.document.getElementById('target_display').style.visibility="hidden";
						parent.document.getElementById('target_display').style.height="275px";
						parent.document.getElementById('target_frame').style.height="320px";
						parent.document.getElementById('target_display').style.width="925px";
						parent.document.getElementById('target_frame').style.width="920px";
						parent.document.getElementById('target_display').style.left="200px";
						parent.document.getElementById('target_display').style.top="70px";
						parent.document.getElementById('person_display').style.zIndex="15";
						parent.document.getElementById('person_frame').style.display="block";
						parent.document.getElementById('person_display').style.visibility="visible";
						parent.document.getElementById('target_display').style.zIndex="6";
					break;	
					case 'page':
						this.window.close();
					break;
					case 'ribbon':
						this.window.close();
					break;
					case 'popup':
						this.window.close();
					break;
				}
				
			}	
			
			function set_context_lang_value ()
			{		}
			
			
		function init_person_popup(id)
        {
     
            console.log("Popup_Person Storing value: Person_id"  + id);
		// adjust frame to display biography
	
		// adjust frame to display biography
			parent.document.getElementById('target_display').style.height="715px";
			parent.document.getElementById('target_frame').style.height="705px";
			parent.document.getElementById('target_display').style.width="1100px";
			parent.document.getElementById('target_frame').style.width="1090px";
			parent.document.getElementById('target_display').style.left="120px";
			parent.document.getElementById('target_display').style.top="2px";
		//	parent.frames['target_frame'].location.href='Popup_Person.html';	
		//	parent.document.getElementById('target_frame').style.display="block";
			parent.document.getElementById('target_display').style.visibility="visible";
		//	window.location.href="Popup_Person.html";
			parent.document.getElementById('target_display').style.zIndex="11";
		}
		
        </script>
		
		<!-- just added to set the language value, shouldn't be displayed  -->
			<div class="results" style="visibility: hidden; display:none;">
				<table><tr><td class="Value"></td></tr></table>
			</div>
			
        <div class="template">
            <table id="headertable">
                <tr>
                 
            <!--        <td><span class="id"></span></td> -->
                    <td rowspan="4"><span class="image"></span></td>
                    
					<td>
				<div id="close_icon" onclick="close_person()" style="position: absolute; top: 0px; right: 0px;"><img src="./pictures/close2.png" width="40"/></div>
				<a id="back_icon" href="javascript:back()"><img src="./pictures/returnbutton.png" width="30px" align="left" /></a>
					<span class="name"></span>: 
                    <span class="birthPlace"></span> - 
                    <span class="birthDay"></span>
					
					
					</td>
                </tr>
                <tr>
               
                    <td><span class="biography"></span></td>
                </tr>
	
	
            </table>
        </div>
		<table class="result_filmography">
			
						<tr>
							<td><span class="filmography"></span></td>  <!-- display filmography -->
						</tr>
					
					</table>
					
		<div class="Filmography_in">
			<table class="result_filmography_inside">
				<tr>
					<td><span class="filmography_inside"></span></td>  <!-- display filmography inside-->
				</tr>
			</table>
		</div>
		
	<!-- display source data from API if needed  -->
        <div id="sourceData"></div>		
    </body>
</html>