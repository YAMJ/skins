<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta name="viewport" content="width=device-width, user-scalable=yes" />
        <title>YAMJ v3 index list</title>
        <script src="js/jquery.js"></script>
        <!-- Used for the JSON parsing -->
        <script src="js/pure.js"></script>
        <!-- Used for the paging of the index -->
        <script src="js/js.js"></script>
		<script src="js/my_remote.js"></script>
        <script src="js/jPages.js"></script>
		<!-- Used for skin language setting -->
		<script src="js/lang.js"></script>
		<!-- Used for config  setting -->
		<script src="js/config.js"></script>
		<!-- Used for template -->
		<script src="js/template.js"></script>
		<script src="js/library2.js"></script>
        <link rel="stylesheet" type="text/css" href="css/yamj-style.css">
        <!-- Used for the paging of the index -->
        <link rel="stylesheet" href="css/jPages.css">
        <!-- Used for the fancy animations -->
        <link rel="stylesheet" href="css/animate.css">
		<!-- used for iscroll special -->
		<script type="text/javascript" src="js/iscroll.js"></script>

    </head>
    <body onload="getheaderData();setTimeout(function(){getIndexData()}, 50);animate_watched();setTimeout(function(){getIndexData2()}, 300);">
        <script type="text/javascript">
	
//***************************************************************************************
		var temp_new_string = '';
		var first_display = true;
		var alternate = 0;
		var alternate_color = "black";
		var jsonUrl = "";
		var jsonUrlheader = "";
		if (localStorage.getItem("index_url"))
			{
				jsonUrl = localStorage.getItem("index_url");
				localStorage.setItem("index_url", "");
			}
		var jsonUrlheader = "";
		if (localStorage.getItem("index_url_header"))
			{
				jsonUrlheader = localStorage.getItem("index_url_header");
				localStorage.setItem("index_url_header", "");
			}
		var selected_index = "";
		if (localStorage.getItem("index_display_header"))
			{
				selected_index = localStorage.getItem("index_display_header");
				localStorage.setItem("index_display_header", "");
			}
		var select = "";
		var max_count = 1;
		// set default to 2 rows and 6 columns
		var RowperPageValue = 2;
		var PerPageValue = 12;
		var LangValue = "en";
		var Prefered_PageValue = "index_all";
        var jsondata = null;
		var menuleft_toggle = 0;
		var index_method = "START";
		var watched_method = "all";
		var resolution_method = "all";
		var newest_method = "";
		var category_type = "";
		var category_name = "";
		var nbre_translate_path = 0;
		var count_result = 0;
		// get the prefered_page
		if (localStorage.getItem("prefered_page"))
			{Prefered_PageValue = localStorage.getItem("prefered_page");}
			else {localStorage.setItem("prefered_page", Prefered_PageValue);}
		// get newest method and reset newest method to ""
		if (localStorage.getItem("newest"))
			{newest_method = localStorage.getItem("newest");
			localStorage.setItem("newest", "");
			}
		// get category type and reset category type to ""
		if (localStorage.getItem("categorytype"))
			{category_type = localStorage.getItem("categorytype");
			localStorage.setItem("categorytype", "index_list2");
			} else 
			{category_type = "index_list2";
			localStorage.setItem("categorytype", "index_list2");
			}
		console.log ("index previous category_type :" + category_type );
		if (localStorage.getItem(category_type + "_name"))
			{category_name = localStorage.getItem(category_type + "_name");} 
		console.log ("index_list2 category name :" + category_name );
		// get the watched method 
		if (localStorage.getItem("watched"))
			{watched_method = localStorage.getItem("watched");}
		// get the resolution method 
		if (localStorage.getItem("resolution"))
			{resolution_method = localStorage.getItem("resolution");}
		// get the search method and reset to default for the next time 
		if (localStorage.getItem("search_method"))
			{index_method = localStorage.getItem("search_method");
			localStorage.setItem("search_method", "START");}
		// set a default  if 1rst time and set to the type previously selected if available 	
		var index_type = "movie,series";
		if (window.localStorage.getItem("indextype"))
			{index_type = window.localStorage.getItem("indextype");
			// reset to all if indextype = person
				if (index_type.toUpperCase() == 'PERSON')
					{
						window.localStorage.setItem("indextype", 'movie,series');
						index_type = 'movie,series';
					}
			}
			else {window.localStorage.setItem("indextype", index_type);}
		// get the way where the title is fetch and display (title, sort_title, original_title)
		var title_type = "title_sort";
			if (window.localStorage.getItem("title_type"))
				{direction = window.localStorage.getItem("title_type");}
			else {window.localStorage.setItem("title_type", title_type);}	
		
		// set a default direction to ASC or set to the direction previously selected if available 	
		var direction = "ASC";
			if (window.localStorage.getItem("direction"))
				{direction = window.localStorage.getItem("direction");}
				else {window.localStorage.setItem("direction", direction);}	
		// get the sort instruction
		var sort_type = "title";
			switch (title_type)
			{
				case "title":
					sort_type = "title";
					break;
				case "title_sort":
					sort_type = "sortTitle"
					break;
				case "title_original":
					sort_type = "originalTitle"
					break;
			}
		if (window.localStorage.getItem("sort_indextype"))
			{
				if (window.localStorage.getItem("sort_indextype") == 'videoYear,createTimestamp')
					{ sort_type = 'videoYear ' + direction + ',createTimestamp ' + direction;} 
				else {sort_type = window.localStorage.getItem("sort_indextype") + ' ' + direction;}
			} 
		else {window.localStorage.setItem("sort_indextype", sort_type)+ ' ' + direction;}
		
        // This is the directive used by pure to transform the JSON data into HTML
        // span.Title is a simple substitution of the title
        // img.Poster@src replaces the "src" attribute of the img.Poster
	  function updateHtml1(yamjdata)
        {
		
		var COUNT_HEADER = {
                'span.ReturnCount': function(arg) {	
					count_result = arg.context.count;
					return arg.context.count+'&nbsp;'+window.localStorage.getItem('results_text');
					}
            };	
			$p('.count_return_index').render(yamjdata, COUNT_HEADER);	
           
        }
	 function updateHtml2(yamjdata)
        {
        var LIST_DIR = {
			"div.block_list": {
                "result<-results": {
                     "span.title_list": function(arg) {
					alternate += 1;
					if (alternate%2 == 0)
					{alternate_color = "grey"} else {alternate_color = "black"}
					switch (title_type)	
					{
						case "title":		
							if ((arg.item.videoType == 'SEASON'))
								{	
									if (first_display) 
										{
											first_display = false;
											direct_info2(arg.item.videoType, arg.item.id);
											return "<a href=\"#\" id='give_focus' style='font-size: 1.6vw; background:"
											+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
											+ arg.item.videoType + "', " + arg.item.id + ")\">"
											+ arg.item.title + ' (' + arg.item.videoYear + ') '+ window.localStorage.getItem('season_label') +': '
											+ arg.item.season + "</a>";
										}
									return "<a href=\"#\" style='font-size: 1.6vw; background:"
									+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
									+ arg.item.videoType + "', " + arg.item.id + ")\">"
									+ arg.item.title + ' (' + arg.item.videoYear + ') '+ window.localStorage.getItem('season_label') +': '
									+ arg.item.season + "</a>";
								} else {
									if (arg.item.videoType == 'SERIES')
										{ 	
										if (first_display) 
											{
												first_display = false;
												direct_info2(arg.item.videoType, arg.item.id);
												return "<a href=\"#\" id='give_focus' style='font-size: 1.6vw;background:"
												+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
												+ arg.item.videoType + "', "+ arg.item.id + ")\">"
												+ window.localStorage.getItem('series_label') + ': ' + arg.item.title + ' (' 
												+ arg.item.videoYear + ')' + "</a>";
											}
											return "<a href=\"#\" style='font-size: 1.6vw; background:"
											+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
											+ arg.item.videoType + "', "+ arg.item.id + ")\">"
											+ window.localStorage.getItem('series_label') + ': ' + arg.item.title + ' (' 
											+ arg.item.videoYear + ')' + "</a>";
										} else {
											if (first_display) 
												{
													first_display = false;
													direct_info2(arg.item.videoType, arg.item.id);
													return "<a href=\"#\" id='give_focus' style='font-size: 1.6vw; background:"
													+ alternate_color + ";' onclick=\" display_short_list (); display_short_list (); direct_info2('"
													+ arg.item.videoType + "', " + arg.item.id + ")\">"
													+ arg.item.title + ' (' + arg.item.videoYear + ')' + "</a>";
												}
											return "<a href=\"#\" style='font-size: 1.6vw; background:"
											+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
											+ arg.item.videoType + "', "
											+ arg.item.id + ")\">"
											+ arg.item.title + ' (' + arg.item.videoYear + ')' + "</a>";
										}
								}
							break;
						case "title_sort":		
							if ((arg.item.videoType == 'SEASON'))
								{	
									if (first_display) 
										{
											first_display = false;
											direct_info2(arg.item.videoType, arg.item.id);
											return "<a href=\"#\" id='give_focus' style='font-size: 1.6vw; background:"
											+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
											+ arg.item.videoType + "', " + arg.item.id + ")\">"
											+ arg.item.sortTitle + ' (' + arg.item.videoYear + ') '+ window.localStorage.getItem('season_label') +': ' 
											+ arg.item.season + "</a>";
										}
									return "<a href=\"#\" style='font-size: 1.6vw; background:"
									+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
									+ arg.item.videoType + "', " + arg.item.id + ")\">"
									+ arg.item.sortTitle + ' (' + arg.item.videoYear + ') '+ window.localStorage.getItem('season_label') +': '
									+ arg.item.season + "</a>";
								} else {
									if (arg.item.videoType == 'SERIES')
										{ 	
										if (first_display) 
											{
												first_display = false;
												direct_info2(arg.item.videoType, arg.item.id);
												return "<a href=\"#\" id='give_focus' style='font-size: 1.6vw;background:"
												+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
												+ arg.item.videoType + "', "+ arg.item.id + ")\">"
												+ window.localStorage.getItem('series_label') + ': ' + arg.item.sortTitle + ' (' 
												+ arg.item.videoYear + ')' + "</a>";
											}
											return "<a href=\"#\" style='font-size: 1.6vw; background:"
											+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
											+ arg.item.videoType + "', "+ arg.item.id + ")\">"
											+ window.localStorage.getItem('series_label') + ': ' + arg.item.sortTitle + ' ('
											+ arg.item.videoYear + ')' + "</a>";
										} else {
											if (first_display) 
												{
													first_display = false;
													direct_info2(arg.item.videoType, arg.item.id);
													return "<a href=\"#\" id='give_focus' style='font-size: 1.6vw; background:"
													+ alternate_color + ";' onclick=\" display_short_list (); display_short_list (); direct_info2('"
													+ arg.item.videoType + "', " + arg.item.id + ")\">"
													+ arg.item.sortTitle + ' (' + arg.item.videoYear + ')' + "</a>";
												}
											return "<a href=\"#\" style='font-size: 1.6vw; background:"
											+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
											+ arg.item.videoType + "', "
											+ arg.item.id + ")\">"
											+ arg.item.sortTitle + ' (' + arg.item.videoYear + ')' + "</a>";
										}
								}
							break;
						case "title_original":		
							if ((arg.item.videoType == 'SEASON'))
								{	
									if (first_display) 
										{
											first_display = false;
											direct_info2(arg.item.videoType, arg.item.id);
											return "<a href=\"#\" id='give_focus' style='font-size: 1.6vw; background:"
											+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
											+ arg.item.videoType + "', " + arg.item.id + ")\">"
											+ arg.item.originalTitle + ' (' + arg.item.videoYear + ') '+ window.localStorage.getItem('season_label') +': ' 
											+ arg.item.season + "</a>";
										}
									return "<a href=\"#\" style='font-size: 1.6vw; background:"
									+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
									+ arg.item.videoType + "', " + arg.item.id + ")\">"
									+ arg.item.originalTitle + ' (' + arg.item.videoYear + ') '+ window.localStorage.getItem('season_label') +': ' 
									+ arg.item.season + "</a>";
								} else {
									if (arg.item.videoType == 'SERIES')
										{ 	
										if (first_display) 
											{
												first_display = false;
												direct_info2(arg.item.videoType, arg.item.id);
												return "<a href=\"#\" id='give_focus' style='font-size: 1.6vw;background:"
												+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
												+ arg.item.videoType + "', "+ arg.item.id + ")\">"
												+ window.localStorage.getItem('series_label') + ': ' + arg.item.originalTitle + ' ('
												+ arg.item.videoYear + ')' + "</a>";
											}
											return "<a href=\"#\" style='font-size: 1.6vw; background:"
											+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
											+ arg.item.videoType + "', "+ arg.item.id + ")\">"
											+ window.localStorage.getItem('series_label') + ': ' + arg.item.originalTitle + ' (' 
											+ arg.item.videoYear + ')' + "</a>";
										} else {
											if (first_display) 
												{
													first_display = false;
													direct_info2(arg.item.videoType, arg.item.id);
													return "<a href=\"#\" id='give_focus' style='font-size: 1.6vw; background:"
													+ alternate_color + ";' onclick=\" display_short_list (); display_short_list (); direct_info2('"
													+ arg.item.videoType + "', " + arg.item.id + ")\">"
													+ arg.item.originalTitle + ' (' + arg.item.videoYear + ')' + "</a>";
												}
											return "<a href=\"#\" style='font-size: 1.6vw; background:"
											+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
											+ arg.item.videoType + "', "
											+ arg.item.id + ")\">"
											+ arg.item.originalTitle + ' (' + arg.item.videoYear + ')' + "</a>";
										}
								}
							break;
						}
					},
					"img.boxset_list@src": function(arg) {
					
                       var output_boxset = "pictures/no_set.png";
                        // Check to see if there are boxset
                        if (arg.item.boxedSets) {output_boxset = "pictures/set.png";}
						return output_boxset;
                    },
					"img.boxset_list@onclick": function(arg) {
						if (arg.item.boxedSets) 
						{ return "open_boxset_index('" + arg.item.boxedSets[0].id+ "', \"" + arg.item.boxedSets[0].name + "\")"; }
					},
					"img.boxset_list@style": function(arg) {
						if (arg.item.boxedSets) 
						{ return "position: relative; top: -1px; height: 2.21vw; display: inline;";} else { return "display: none;";}
					},
					"img.rating_list@src": function(arg) {
                       var output_rating = "pictures/ratings/dummy_rating.png";
                        // Check to see if there are ratings
                        if (arg.item.ratings) {
						var boucle = true;
						var rating = arg.item.ratings; 
						
						for (i = 0; boucle && i < rating.length; i++) 
							{
								if (rating[i].source == 'combined')
								{
									boucle = false;
									output_rating = "pictures/ratings/star_rating/star" + Math.round(rating[i].rating/10) + ".png"
								} 
							}
						}
						return output_rating;
                    },
					"img.rating_list@onclick": function(arg) {
						 var output_rating_click = "";
							// Check to see if there are ratings
							if (arg.item.ratings) {
							var boucle = true;
							var rating = arg.item.ratings; 
							
							for (i = 0; boucle && i < rating.length; i++) 
								{
									if (rating[i].source == 'combined')
									{
										boucle = false;
										output_rating_click = "open_rating_index('" + rating[i].source+ "','" + Math.round(rating[i].rating/10) + "')"
									} 
								}
							}
							return output_rating_click;
					},
					"img.playbutton_list@onclick": function(arg) {
                        return "direct_play('" + arg.item.videoType + "', " + arg.item.id + ")";
                    },
					"img.infobutton_list@onclick": function(arg) {
					//	cursor_position (); 
                        return "direct_info2('" + arg.item.videoType + "', " + arg.item.id + ")";
                    },
					"img.watched_small_list@src": function(arg)
					{
						if (arg.item.watched) 
						
						{return "./pictures/watched.png";} else
						{return "./pictures/unwatched.png";}
					}, 
					"img.watched_small_list@onmouseout": function(arg)
					{
						if (arg.item.watched) 
						{return "src='pictures/watched.png'";} else
						{return "src='pictures/unwatched.png'";}
					},
					"img.watched_small_list@onclick": function(arg)
					{
						return "toggle_watched (" +arg.item.watched + ", " + arg.item.id + ", '" + arg.item.videoType + "'); " ;
					},
					"img.watched_small_list@title": function(arg)
					{
						if (arg.item.watched) 
						{return window.localStorage.getItem('watched_select').toLowerCase();} else
						{return window.localStorage.getItem('unwatched_select').toLowerCase();}
					},
					"img.not_done_list@style": function(arg)
					{
						if (arg.item.status == 'DONE') 
						{return "position: relative; top: -25vw; left: 8.5vw; display: none";} else
						{return "position: relative; top: -25vw; left: 8.5vw; display: block";}
					}
                }
            }
        };
	            $p('div.row_list').render(yamjdata, LIST_DIR);
				$('.row_list').css('display', 'block');
				$('#give_focus').focus();
				return;
        }
        function setId(type, id)
        {
            window.localStorage.setItem("indextype", type);
            window.localStorage.setItem("id", id);
            console.log("setId Storing value: " + type + "-" + id);
            window.location.href="detail.html";
        }

        // This function calls the API to get the JSON data.
        // It will then update the HTML with the data and set up the paging
        function getheaderData()
        {
			// get skin
			get_Skin ();
			// set local context value
			set_context_lang_value ();
		// reset the previous index data stored because it's not a display change 
			window.localStorage.setItem("index_list_url_header","")
			window.localStorage.setItem("index_list_url","")
		//  switch from index  display type wall to index_list display type list 
		//  don't reconstruct the json api call , use the one stored  
		if (jsonUrl != "" && category_type == "index")	
			{ 
				console.log ("use JsonUrl already setted with JsonUrl= " + jsonUrl);
			}
		//  doesn't have index call before  
		//  reconstruct the json api call  	
		else
			{
			switch (index_type.toLowerCase())
				{
					case 'movie,series':
						selected_index = window.localStorage.getItem("all_select").toUpperCase();
						break;
					case 'movie':
						selected_index = window.localStorage.getItem("movie_select").toUpperCase();
						break;
					case 'series':
						selected_index = window.localStorage.getItem("series_select").toUpperCase();
						break;
					case 'season':
						selected_index = window.localStorage.getItem("season_select").toUpperCase();
						break;
					default :
						selected_index = window.localStorage.getItem("all_select").toUpperCase();
						window.localStorage.setItem("indextype", 'movie,series');
				};
				switch (watched_method)
				{
					case 'all':
						selected_index = selected_index;
						break;
					case 'true':
						selected_index = selected_index + "(" + window.localStorage.getItem('watched_select').toUpperCase() + ")&nbsp;";
						break;
					case 'false':
						selected_index = selected_index + "(" + window.localStorage.getItem('unwatched_select').toUpperCase() + ")&nbsp;";
						break;
					default :
						selected_index = selected_index;
				};
		
			 jsonUrl = "/yamj3/api/index/video.json?type="+index_type+"&dataitems=status,boxset,rating,videosource&sortby="+sort_type;	
			 jsonUrlheader = "/yamj3/api/index/video.json?type="+index_type;	
					if (window.localStorage.getItem("yearselected") == 'true' && window.localStorage.getItem("selection")) 
						{
									if (resolution_method != 'all')
										{
											jsonUrl += "&include=year-" + window.localStorage.getItem("selection") + ",resolution-" + resolution_method;
											jsonUrlheader += "&include=year-" + window.localStorage.getItem("selection") + ",resolution-" + resolution_method;
											selected_index = selected_index + '&nbsp;resolution:' + resolution_method;
										} else { 
											jsonUrl = jsonUrl + "&include=year-"+window.localStorage.getItem("selection"); 
											jsonUrlheader = jsonUrl + "&include=year-"+window.localStorage.getItem("selection");
										}
									selected_index = selected_index + '&nbsp;' + window.localStorage.getItem("year_label").toUpperCase() + ':' + window.localStorage.getItem("selection");
									window.localStorage.setItem("yearselected", 'false');
									window.localStorage.setItem("selection", "");
									window.localStorage.setItem("search_index", "");	
						} 
					else 
						{
							if (resolution_method != 'all')
								{
											jsonUrl += "&include=resolution-" + resolution_method;
											jsonUrlheader += "&include=resolution-" + resolution_method;
											selected_index = selected_index + '&nbsp;resolution:' + resolution_method;
								}
							if (window.localStorage.getItem("search_index"))
								{
									console.log("window.localStorage.getItem('search_index').substr(0, 11):"  
									+ window.localStorage.getItem("search_index").substr(0, 11)
									+ " window.localStorage.getItem('search_index').substr(14, 9):"
									+ window.localStorage.getItem("search_index").substr(15, 9));
									
									if (window.localStorage.getItem("search_index").substr(0, 11) =='&yearStart=' && window.localStorage.getItem("search_index").substr(15, 9) =='&yearEnd=')
										{
											selected_index = selected_index
											+ "&nbsp;(" + window.localStorage.getItem("search_index").substr(11, 4)
											+ "-" 
											+ window.localStorage.getItem("search_index").substr(24, 4) + ")";
										}
									else 
										{
											selected_index = selected_index
											+ "&nbsp;("
											+ window.localStorage.getItem('title_type') + " "
											+ window.localStorage.getItem("search_index").toUpperCase()
											+ ")";
										}

									jsonUrl = jsonUrl 
										+ "&search=" 
										+ window.localStorage.getItem("search_index") 
										+ "&field="
										+ window.localStorage.getItem('title_type') 
										+ "&mode="+index_method;
										
									jsonUrlheader = jsonUrlheader 
										+ "&search=" + window.localStorage.getItem("search_index") 
										+ "&field="
										+ window.localStorage.getItem('title_type') 
										+ "&mode="+index_method;
										
										window.localStorage.setItem("search_index", "");	
								} 
							else 
								{ 
									if (window.localStorage.getItem("sort_indextype").toLowerCase().indexOf('title') != -1) 
										{
											switch (window.localStorage.getItem("title_type"))
											{
												case "title":
													selected_index = selected_index + "&nbsp;(" + window.localStorage.getItem('title_label');
													break;
												case "title_sort":
													selected_index = selected_index + "&nbsp;(" + window.localStorage.getItem('title_sort_label');
													break;
												case "title_original":
													selected_index = selected_index + "&nbsp;(" + window.localStorage.getItem('title_original_label');
													break;
											}
										}
									else {selected_index = selected_index + "&nbsp;(" + window.localStorage.getItem('year_label');}
									if (direction == 'ASC') 
											{selected_index = selected_index +  ", "+ window.localStorage.getItem('asc_label') + ")";}			
									else {selected_index = selected_index +  ", "+ window.localStorage.getItem('desc_label') + ")";}	
								}
						}
								
				jsonUrl += "&artwork=poster&watched=" + watched_method;
				jsonUrlheader += "&watched=" + watched_method;
				if (newest_method != '')
				{jsonUrl += "&include=newest-" + newest_method;
				jsonUrlheader += "&include=newest-" + newest_method;}
				switch (newest_method.substr(newest_method.indexOf('-') + 1))
					{
						case 'file':
						{
						temp_new_string ="&nbsp;" + window.localStorage.getItem("new_") +  ":"
						+ window.localStorage.getItem("New").substr(0,newest_method.indexOf('-')) + "&nbsp;"
						+ window.localStorage.getItem('day_label');
						break;
						}
						case 'creation':
						{
						temp_new_string ="&nbsp;" + window.localStorage.getItem("new_") +  ":"
						+ window.localStorage.getItem("New").substr(0,newest_method.indexOf('-')) + "&nbsp;"
						+ window.localStorage.getItem('day_label');
						break;
						}
						case 'lastscan':
						{
						temp_new_string ="&nbsp;" + window.localStorage.getItem("new_") +  ":"
						+ window.localStorage.getItem("New").substr(0,newest_method.indexOf('-')) + "&nbsp;"
						+ window.localStorage.getItem('day_label');
						break;
						}	
					}
				selected_index = selected_index + temp_new_string;
					// check if a category is asked, means not calling from index or index list or person 
						if (category_type == '' | category_type == "index" | category_type == "index_list2" | category_type == "person")
						{} else
						{
							jsonUrl += "&include=" + category_type + "-" + category_name;
							jsonUrlheader += "&include=" + category_type + "-" + category_name;
							if (category_type == "certification")
							{selected_index = selected_index + "&nbsp;" + window.localStorage.getItem(category_type.toLowerCase()
							+ '_select').toLowerCase() + ":" + window.localStorage.getItem('certification_value').toLowerCase();}
							else if (category_type == "studio")
							{selected_index = selected_index + "&nbsp;" + window.localStorage.getItem(category_type.toLowerCase()
							+ '_select').toLowerCase() + ":" + window.localStorage.getItem('studio_text').toLowerCase();}
							else if (category_type == "library")
							{selected_index = selected_index + "&nbsp;"
							+ window.localStorage.getItem(category_type.toLowerCase() + '_select').toLowerCase() 
							+ ":" + window.localStorage.getItem('library_text').toLowerCase();}
							else if (category_type == "boxset")
							{selected_index = selected_index + "&nbsp;" + window.localStorage.getItem(category_type.toLowerCase()
							+ '_select').toLowerCase() + ":" + window.localStorage.getItem('boxset_text').toLowerCase();}
							else {selected_index = selected_index + "&nbsp;" + window.localStorage.getItem(category_type.toLowerCase()
							+ '_select').toLowerCase() + ":" + category_name;}
						}
		
			}
		// now all construction is done, store the value in case a just a display change 
				window.localStorage.setItem("index_list_url_header",jsonUrlheader);
				window.localStorage.setItem("index_list_url",jsonUrl);
				window.localStorage.setItem("index_list_display_header",selected_index);
				var temp_style = "1.4vw"
					
					if (selected_index.length > 35)	{temp_style = "1.4vw";}
					if (selected_index.length > 40)	{temp_style = "1.35vw";}
					if (selected_index.length > 44)	{temp_style = "1.3vw";}
					if (selected_index.length > 49)	{temp_style = "1.25vw";}
					if (selected_index.length > 57)	{temp_style = "1.2vw";}
					if (selected_index.length > 61)	{temp_style = "1.15vw";}
					if (selected_index.length > 65)	{temp_style = "1.1vw";}
					if (selected_index.length > 69)	{temp_style = "1.05vw";}
					if (selected_index.length > 72)	{temp_style = "1vw";}
					if (selected_index.length > 74)	{temp_style = "0.95vw";}
					if (selected_index.length > 78)	{temp_style = "0.80vw";}
				console.log("Index_list getheaderData selected_index.length: " + selected_index.length + " temp_style:" + temp_style);
				$(".show_index").css("font-size", temp_style);
				$('#printsearch').html(selected_index);
		console.log("Index_list getheaderData URLheader: " + jsonUrlheader);
			
		$.ajax({
			
                url: jsonUrlheader,
                async: false,
                dataType: 'jsonp',
                'success': function(dataheader)
                {
                    jsondata = dataheader;
				//	 outputJson(data); 		
                    updateHtml1(dataheader);
					
                }
            });
			return;
		}
	 
			
        // Run the pure.js function to render the data into the HTML template
        // div.row is the part of the template to apply it too.
        // "row" is a CLASS attribute, not the id.
      
		
		function updateHtml3(yamjdata)
        {
		console.log("Index updateHtml3 update html");

		 var LIST_DIR2 = {
			"div.block_list": {
                "result<-results": {
                    "span.title2_list": function(arg) {
					alternate += 1;
					if (alternate%2 == 0)
					{alternate_color = "grey"} else {alternate_color = "black"}	
					switch (title_type)	
					{
						case "title":		
							if ((arg.item.videoType == 'SEASON'))
								{	
									if (first_display) 
										{
											first_display = false;
											direct_info2(arg.item.videoType, arg.item.id);
											return "<a href=\"#\" id='give_focus' style='font-size: 1.6vw; background:"
											+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
											+ arg.item.videoType + "', " + arg.item.id + ")\">"
											+ arg.item.title + ' (' + arg.item.videoYear + ') '+ window.localStorage.getItem('season_label') +': '
											+ arg.item.season + "</a>";
										}
									return "<a href=\"#\" style='font-size: 1.6vw; background:"
									+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
									+ arg.item.videoType + "', " + arg.item.id + ")\">"
									+ arg.item.title + ' (' + arg.item.videoYear + ') '+ window.localStorage.getItem('season_label') +': '
									+ arg.item.season + "</a>";
								} else {
									if (arg.item.videoType == 'SERIES')
										{ 	
										if (first_display) 
											{
												first_display = false;
												direct_info2(arg.item.videoType, arg.item.id);
												return "<a href=\"#\" id='give_focus' style='font-size: 1.6vw;background:"
												+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
												+ arg.item.videoType + "', "+ arg.item.id + ")\">"
												+ window.localStorage.getItem('series_label') + ': ' + arg.item.title + ' (' + arg.item.videoYear + ')' + "</a>";
											}
											return "<a href=\"#\" style='font-size: 1.6vw; background:"
											+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
											+ arg.item.videoType + "', "+ arg.item.id + ")\">"
											+ window.localStorage.getItem('series_label') + ': ' + arg.item.title + ' (' + arg.item.videoYear + ')' + "</a>";
										} else {
											if (first_display) 
												{
													first_display = false;
													direct_info2(arg.item.videoType, arg.item.id);
													return "<a href=\"#\" id='give_focus' style='font-size: 1.6vw; background:"
													+ alternate_color + ";' onclick=\" display_short_list (); display_short_list (); direct_info2('"
													+ arg.item.videoType + "', " + arg.item.id + ")\">"
													+ arg.item.title + ' (' + arg.item.videoYear + ')' + "</a>";
												}
											return "<a href=\"#\" style='font-size: 1.6vw; background:"
											+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
											+ arg.item.videoType + "', "
											+ arg.item.id + ")\">"
											+ arg.item.title + ' (' + arg.item.videoYear + ')' + "</a>";
										}
								}
							break;
						case "title_sort":		
							if ((arg.item.videoType == 'SEASON'))
								{	
									if (first_display) 
										{
											first_display = false;
											direct_info2(arg.item.videoType, arg.item.id);
											return "<a href=\"#\" id='give_focus' style='font-size: 1.6vw; background:"
											+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
											+ arg.item.videoType + "', " + arg.item.id + ")\">"
											+ arg.item.sortTitle + ' (' + arg.item.videoYear + ') '+ window.localStorage.getItem('season_label') +': ' 
											+ arg.item.season + "</a>";
										}
									return "<a href=\"#\" style='font-size: 1.6vw; background:"
									+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
									+ arg.item.videoType + "', " + arg.item.id + ")\">"
									+ arg.item.sortTitle + ' (' + arg.item.videoYear + ') '+ window.localStorage.getItem('season_label') +': '
									+ arg.item.season + "</a>";
								} else {
									if (arg.item.videoType == 'SERIES')
										{ 	
										if (first_display) 
											{
												first_display = false;
												direct_info2(arg.item.videoType, arg.item.id);
												return "<a href=\"#\" id='give_focus' style='font-size: 1.6vw;background:"
												+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
												+ arg.item.videoType + "', "+ arg.item.id + ")\">"
												+ window.localStorage.getItem('series_label') + ': ' + arg.item.sortTitle + ' (' + arg.item.videoYear + ')' + "</a>";
											}
											return "<a href=\"#\" style='font-size: 1.6vw; background:"
											+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
											+ arg.item.videoType + "', "+ arg.item.id + ")\">"
											+ window.localStorage.getItem('series_label') + ': ' + arg.item.sortTitle + ' (' + arg.item.videoYear + ')' + "</a>";
										} else {
											if (first_display) 
												{
													first_display = false;
													direct_info2(arg.item.videoType, arg.item.id);
													return "<a href=\"#\" id='give_focus' style='font-size: 1.6vw; background:"
													+ alternate_color + ";' onclick=\" display_short_list (); display_short_list (); direct_info2('"
													+ arg.item.videoType + "', " + arg.item.id + ")\">"
													+ arg.item.sortTitle + ' (' + arg.item.videoYear + ')' + "</a>";
												}
											return "<a href=\"#\" style='font-size: 1.6vw; background:"
											+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
											+ arg.item.videoType + "', "
											+ arg.item.id + ")\">"
											+ arg.item.sortTitle + ' (' + arg.item.videoYear + ')' + "</a>";
										}
								}
							break;
						case "title_original":		
							if ((arg.item.videoType == 'SEASON'))
								{	
									if (first_display) 
										{
											first_display = false;
											direct_info2(arg.item.videoType, arg.item.id);
											return "<a href=\"#\" id='give_focus' style='font-size: 1.6vw; background:"
											+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
											+ arg.item.videoType + "', " + arg.item.id + ")\">"
											+ arg.item.originalTitle + ' (' + arg.item.videoYear + ') '+ window.localStorage.getItem('season_label') +': '
											+ arg.item.season + "</a>";
										}
									return "<a href=\"#\" style='font-size: 1.6vw; background:"
									+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
									+ arg.item.videoType + "', " + arg.item.id + ")\">"
									+ arg.item.originalTitle + ' (' + arg.item.videoYear + ') '+ window.localStorage.getItem('season_label') +': ' 
									+ arg.item.season + "</a>";
								} else {
									if (arg.item.videoType == 'SERIES')
										{ 	
										if (first_display) 
											{
												first_display = false;
												direct_info2(arg.item.videoType, arg.item.id);
												return "<a href=\"#\" id='give_focus' style='font-size: 1.6vw;background:"
												+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
												+ arg.item.videoType + "', "+ arg.item.id + ")\">"
												+ window.localStorage.getItem('series_label') + ': ' + arg.item.originalTitle + ' (' + arg.item.videoYear + ')' + "</a>";
											}
											return "<a href=\"#\" style='font-size: 1.6vw; background:"
											+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
											+ arg.item.videoType + "', "+ arg.item.id + ")\">"
											+ window.localStorage.getItem('series_label') + ': ' + arg.item.originalTitle + ' (' + arg.item.videoYear + ')' + "</a>";
										} else {
											if (first_display) 
												{
													first_display = false;
													direct_info2(arg.item.videoType, arg.item.id);
													return "<a href=\"#\" id='give_focus' style='font-size: 1.6vw; background:"
													+ alternate_color + ";' onclick=\" display_short_list (); display_short_list (); direct_info2('"
													+ arg.item.videoType + "', " + arg.item.id + ")\">"
													+ arg.item.originalTitle + ' (' + arg.item.videoYear + ')' + "</a>";
												}
											return "<a href=\"#\" style='font-size: 1.6vw; background:"
											+ alternate_color + ";' onclick=\" display_short_list (); direct_info2('"
											+ arg.item.videoType + "', "
											+ arg.item.id + ")\">"
											+ arg.item.originalTitle + ' (' + arg.item.videoYear + ')' + "</a>";
										}
								}
							break;
						}
					},
					"img.boxset2_list@src": function(arg) {
                       var output_boxset = "pictures/no_set.png";
                        // Check to see if there are boxset
                        if (arg.item.boxedSets) {output_boxset = "pictures/set.png";}
						return output_boxset;
                    },
					"img.boxset2_list@onclick": function(arg) {
						if (arg.item.boxedSets) 
						{ return "open_boxset_index('" + arg.item.boxedSets[0].id+ "', \"" + arg.item.boxedSets[0].name + "\")"; }
					},
					"img.boxset2_list@style": function(arg) {
						if (arg.item.boxedSets) 
						{ return "position: relative; top: -1px; height: 2.21vw; display: inline;";} else { return "display: none;";}
					},
					"img.rating2_list@src": function(arg) {
                       var output_rating = "pictures/ratings/dummy_rating.png";
                        // Check to see if there are ratings
                        if (arg.item.ratings) {
						var boucle = true;
						var rating = arg.item.ratings; 
						
						for (i = 0; boucle && i < rating.length; i++) 
							{
								if (rating[i].source == 'combined')
								{
									boucle = false;
									output_rating = "pictures/ratings/star_rating/star" + Math.round(rating[i].rating/10) + ".png"
								} 
							}
						}
						return output_rating;
                    },
					"img.rating2_list@onclick": function(arg) {
						 var output_rating_click = "";
							// Check to see if there are ratings
							if (arg.item.ratings) {
							var boucle = true;
							var rating = arg.item.ratings; 
							
							for (i = 0; boucle && i < rating.length; i++) 
								{
									if (rating[i].source == 'combined')
									{
										boucle = false;
										output_rating_click = "open_rating_index('" + rating[i].source+ "','" + Math.round(rating[i].rating/10) + "')"
									} 
								}
							}
							return output_rating_click;
					},
					"img.playbutton2_list@onclick": function(arg) {
                        return "direct_play('" + arg.item.videoType + "', " + arg.item.id + ")";
                    },
					"img.infobutton2_list@onclick": function(arg) {
					//	cursor_position (); 
                        return "direct_info2('" + arg.item.videoType + "', " + arg.item.id + ")";
                    },
					"img.watched_small2_list@src": function(arg)
					{
						if (arg.item.watched) 
						
						{return "./pictures/watched.png";} else
						{return "./pictures/unwatched.png";}
					}, 
					"img.watched_small2_list@onmouseout": function(arg)
					{
						if (arg.item.watched) 
						{return "src='pictures/watched.png'";} else
						{return "src='pictures/unwatched.png'";}
					},
					"img.watched_small2_list@onclick": function(arg)
					{
						return "toggle_watched (" +arg.item.watched + ", " + arg.item.id + ", '" + arg.item.videoType + "'); " ;
					},
					"img.watched_small2_list@title": function(arg)
					{
						if (arg.item.watched) 
						{return window.localStorage.getItem('watched_select').toLowerCase();} else
						{return window.localStorage.getItem('unwatched_select').toLowerCase();}
					},
					"img.not_done2_list@style": function(arg)
					{
						if (arg.item.status == 'DONE') 
						{return "position: relative; top: -25vw; left: 8.5vw; display: none";} else
						{return "position: relative; top: -25vw; left: 8.5vw; display: block";}
					}
                }
            }
        };

            $p('div.row2_list').render(yamjdata, LIST_DIR2);
			$('.row2_list').css('display', 'block');
	}
	function getIndexData2()
	{
			if (count_result > (max_count - 1) && (window.localStorage.getItem("Paging") == 'false'))
				{
				
				jsonUrltemp = jsonUrl + "&start=" + max_count
				console.log("Index getIndexData URL: " + jsonUrltemp + " count_result:" + count_result);
				$.ajax({
                url: jsonUrltemp,
                async: true,
                dataType: 'jsonp',
                'success': function(data)
                {
                    jsondata = data;
				//	 outputJson(data); 	
					
					updateHtml3(data);
				}
			
       
			}); 
			return jsondata;
		}
	}
		function SetIndexData (search)
		{		
				window.localStorage.setItem("search_index", search);
				window.location.reload();
		
		}
		function display_full_list ()
		{
			document.getElementById('container').style.top="150px";
			document.getElementById('container').style.height="80%";
			document.getElementById('full_list').style.top="110px";
			document.getElementById('img_full_list').src="./pictures/down.png";
			document.getElementById('img_full_list').attributes.getNamedItem("onclick").value = "display_short_list ()";
		}
		function display_short_list ()
		{
			document.getElementById('container').style.top="62vh";
			document.getElementById('container').style.height="37%";
			document.getElementById('full_list').style.top="58%";
			document.getElementById('img_full_list').src="./pictures/up.png";
			document.getElementById('img_full_list').attributes.getNamedItem("onclick").value = "display_full_list ()";
		}
  //************************ LANGUAGE LOCAL SETTING *********************************************
		// store all value according to language setting - from yamjv3_lang_{lang}.xml - local setting 
		function set_context_lang_value ()
		{
			
			document.getElementById("info_config").attributes.getNamedItem("data-tip2").value=window.localStorage.getItem('skin_').toLowerCase() + " "
			+ window.localStorage.getItem('info_label').toLowerCase();
			switch (window.localStorage.getItem('prefered_page').toLowerCase())
			{
				case 'certification':
				{
					document.getElementById("li_home_left").attributes.getNamedItem("data-tip2").value=window.localStorage.getItem('prefered_comment').toLowerCase() + ": " 
					+ window.localStorage.getItem('certification_label').toLowerCase();
				break;
				}
				case 'index_all':
				{
					document.getElementById("li_home_left").attributes.getNamedItem("data-tip2").value=window.localStorage.getItem('prefered_comment').toLowerCase() + ": " 
					+ window.localStorage.getItem('all_label').toLowerCase();
				break;
				}
				case 'index_movie':
				{
					document.getElementById("li_home_left").attributes.getNamedItem("data-tip2").value=window.localStorage.getItem('prefered_comment').toLowerCase() + ": " 
					+ window.localStorage.getItem('movie_label').toLowerCase();
				break;
				}
				case 'index_series':
				{
					document.getElementById("li_home_left").attributes.getNamedItem("data-tip2").value=window.localStorage.getItem('prefered_comment').toLowerCase() + ": "
					+ window.localStorage.getItem('series_label').toLowerCase();
				break;
				}
				case 'new':
				{
					document.getElementById("li_home_left").attributes.getNamedItem("data-tip2").value=window.localStorage.getItem('prefered_comment').toLowerCase() + ": " 
					+ window.localStorage.getItem('new_').toLowerCase();
				break;
				}
				case 'person':
				{
					document.getElementById("li_home_left").attributes.getNamedItem("data-tip2").value=window.localStorage.getItem('prefered_comment').toLowerCase() + ": " 
					+ window.localStorage.getItem('person_label').toLowerCase();
				break;
				}
				case 'rating':
				{
					document.getElementById("li_home_left").attributes.getNamedItem("data-tip2").value=window.localStorage.getItem('prefered_comment').toLowerCase() + ": " 
					+ window.localStorage.getItem('rating_label').toLowerCase();
				break;
				}
				case 'source':
				{
					document.getElementById("li_home_left").attributes.getNamedItem("data-tip2").value=window.localStorage.getItem('prefered_comment').toLowerCase() + ": "
					+ window.localStorage.getItem('source_label').toLowerCase();
				break;
				}
			}
			document.getElementsByClassName("playbutton_list")[0].title=window.localStorage.getItem('play_label').toLowerCase();
	//		document.getElementsByClassName("infobutton_list")[0].title=window.localStorage.getItem('info_label').toLowerCase();
			document.getElementsByClassName("rating_list")[0].title=window.localStorage.getItem('rating_label').toLowerCase();
			document.getElementsByClassName("boxset_list")[0].title=window.localStorage.getItem('boxset_label').toLowerCase();
			document.getElementsByClassName("playbutton2_list")[0].title=window.localStorage.getItem('play_label').toLowerCase();
	//		document.getElementsByClassName("infobutton2_list")[0].title=window.localStorage.getItem('info_label').toLowerCase();
			document.getElementsByClassName("rating2_list")[0].title=window.localStorage.getItem('rating_label').toLowerCase();
			document.getElementsByClassName("boxset2_list")[0].title=window.localStorage.getItem('boxset_label').toLowerCase();
			
		}
		
        </script>

	<!-- just added to set the language value, shouldn't be displayed  -->
			<div class="results" style="visibility: hidden; display:none;">
				<table><tr><td class="Value"></td></tr></table>
			</div>
			<!-- just added to set the poster number value, shouldn't be displayed  -->
			<div class="poster_results" style="visibility: hidden; display:none;">
				<table><tr><td class="Poster_Value"></td></tr></table>
			</div>
	<div class="index_header" style="position: absolute;"> 
			<a href="javascript:ouvre_prefered_page()" id="li_home_left" data-tip2="prefered page"></a>
			<a id="info_config" data-tip2="info" href="javascript:ouvre_info_config()" ></a>
			<div class="show_index"><span id="printsearch"></span></div>
			<div class="count_return_index">
                   <span class="ReturnCount"></span> 
			</div>
			 <!-- include navigation header after context return , page info and count return -->		
			<div>
				<object data="include_header_index_menu.html" type="text/html" id="my_header_menu" ></object>
			</div>
		<div class="directplay" style="display:none">
			<span class="filepath"></span>
		</div>
            <!--Navigation Holder-->
        <div class="holder"></div>
	</div>
	<div id="full_list"><img id="img_full_list" onclick="display_full_list()" src="./pictures/up.png" width="40px" /></div>
        <!--Data Items Container-->
        <div id="container" style="position: absolute; left: 17.5vw; top: 62vh; height: 37%; width: 82%; display: block; z-index:12;" >
			
            <div id="yRow" class="row_list">
                <div id="yBlock" class="block_list" >
					<img class="rating_list" title="rating" src="./pictures/vertical_ratings/dummy_rating.png" onclick="" alt="rating"/>
                    <img class="playbutton_list" src="pictures/next.png" onmouseout="src='pictures/next.png'" onmouseover="src='pictures/nextSelect.png'" alt="next" title="play" ></img>
					<img class="infobutton_list" src="pictures/info2_on.png" onmouseout="src='pictures/info2_on.png'" onmouseover="src='pictures/info.png'" alt="info" title="info" style="display: none;"></img>
					<img class="watched_small_list" src="pictures/empty.png" alt="watched" onmouseout="src='pictures/empty.png'" title="watch" ></img> 
                    <span class="title_list" ></span>
					<img class="boxset_list" title="boxset" src="./pictures/no_set.png" onclick="" alt="boxset" />
					<img class="not_done_list" src="pictures/icon_error.png" alt="status not done" title="status not done" ></img> 
				</div>
			</div>
			<div id="yRow" class="row2_list" >
				<div id="yBlock" class="block_list" >
					<img class="rating2_list" title="rating" src="./pictures/vertical_ratings/dummy_rating.png" onclick="" alt="rating"/>
					<img class="playbutton2_list" src="pictures/next.png" onmouseout="src='pictures/next.png'" onmouseover="src='pictures/nextSelect.png'" alt="next" title="play" ></img>
					<img class="infobutton2_list" src="pictures/info2_on.png" onmouseout="src='pictures/info2_on.png'" onmouseover="src='pictures/info.png'" alt="info" title="info" style="display: none"></img>
					<img class="watched_small2_list" src="pictures/empty.png" alt="watched" onmouseout="src='pictures/empty.png'" title="watch" ></img> 
					<span class="title2_list" ></span>
					<img class="boxset2_list" title="boxset" src="./pictures/no_set.png" onclick="" alt="boxset" />				
					<img class="not_done2_list" src="pictures/icon_error.png" alt="status not done" title="status not done"></img>
					<br> 
				</div>
			</div>
        </div>
	<!-- add left menu dynamically from a separate file --> 
	<div >
      <object data="include_left_menu.html" type="text/html" id="my_left_menu"></object>
    </div>
	
	<!-- display infobox -->
		<button id="infobox" onclick="javascript:start_playing ()"></button>
	<!-- display Remote -->
		<div id="remote" style="visibility: hidden; ">
			<iframe src="" name="remote_frame" resizable="yes" id="remote_frame" scrolling="yes" frameborder="0" style="overflow:auto; width:430px; height:660px;" allowTransparency="true"></iframe>
		</div>	
	<!-- display config / search -->
		<div id="target_display" style="visibility: hidden; ">		
			<iframe src="" name="target_frame" resizable="yes" id="target_frame" scrolling="no" frameborder="1" style="overflow:hidden; width:1050px; height:320px;" allowTransparency="true"></iframe>
		</div>
	<!-- display detail  -->
		<div id="detail_display" style="visibility: hidden;display:none; position: absolute; top: 40px; z-index: 9; height: 189%; width: 198%">		
			<iframe src="" name="detail_frame" resizable="yes" id="detail_frame" scrolling="no" frameborder="1" style="overflow:hidden;  width:50%; height:50%;" allowTransparency="true"></iframe>
		</div>	
	<!-- display Movie--> 
		<div id="movie_display" style="visibility: hidden; ">
			<iframe src="" name="movie_frame" resizable="yes" id="movie_frame" scrolling="yes" frameborder="1" style="overflow:auto; width:1245px; height:265px;" allowTransparency="true"></iframe>
		</div>	
	<!-- display person -->
		<div id="person_display" style="visibility: hidden; ">	
			<iframe src="" name="person_frame" resizable="yes" id="person_frame" scrolling="yes" frameborder="1" style="overflow:auto; width:1220px; height:335px;" allowTransparency="true"></iframe>
		</div>
	<!-- display source data from API if needed  -->
        <div id="sourceData"></div>
	<script>
	function getIndexData()
        {
				get_poster_number ();
				console.log ("index getIndexData RowperPageValue: " + RowperPageValue)
				switch (RowperPageValue)
				{
				case 0:
				case 1:
					{
						max_count = 20;
					break;
					}
				case 2:
					{
						max_count = 36;
					break;
					}
				case 3:
					{
						max_count = 54;
					break;
					}
				case 4:
					{
						max_count = 84;
					break;
					}
				case 5:
				case 6:
					{
						max_count = 91;
					break;
					}
				}	
				if (count_result > max_count && (window.localStorage.getItem("Paging") == 'false'))
				{jsonUrltemp = jsonUrl + "&start=0&max=" + max_count}
				else {jsonUrltemp = jsonUrl}
				console.log("Index_list getIndexData URL: " + jsonUrltemp + " count_result:" + count_result);
				$.ajax({
                url: jsonUrltemp,
                async: true,
                dataType: 'jsonp',
                'success': function(data)
                {
                    jsondata = data;
				//	 outputJson(data); 		
					updateHtml2(data);
				//	get_poster_number ();
				//	console.log("Index_list GetIndexData: perPageValue="+perPageValue+" paging:"+ window.localStorage.getItem('Paging'));
                 if (window.localStorage.getItem("Paging") == 'true') { 	
						pageData(perPageValue);}
                }
            });
			
            return jsondata;
        }
		</script>
    </body>
</html>
